server:
  port: 8084

spring:
  config:
    import: optional:file:../.env[.properties]
  main:
    allow-bean-definition-overriding: true  # Bean 중복 정의 허용 (임시)
  # DB 접속 정보
  datasource:
    url: jdbc:mysql://${RDS_ENDPOINT}:3306/${RDS_DB_NAME}
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${DATASOURCE_USERNAME}
    password: ${DATASOURCE_PASSWORD}
  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: update  # 개발 중엔 update, 운영은 validate or none 권장
    properties:
      hibernate:
        format_sql: true
    show-sql: true
  # OpenFeign 로컬 테스트용
  profiles:
    active: local # 기본 활성 프로필을 local로 지정

# Feign Client가 호출할 user-service의 로컬 주소를 직접 지정
service-urls:
  user-service: http://localhost:8080

# Review Service 자체 설정
review-service:
  user-verification:
    enabled: false  # 현재는 false로 설정 (User Service 개발자와 협의 후 true로 변경)
    mock-mode: true # 개발환경에서 Mock 데이터 사용
    fallback-on-error: true # 에러 시 Fallback 사용

# Feign 설정
feign:
  client:
    config:
      default:
        connectTimeout: 10000  # 연결 타임아웃 10초
        readTimeout: 30000     # 읽기 타임아웃 30초
        loggerLevel: full      # 로그 레벨
      user-service:           # 특정 서비스별 설정
        connectTimeout: 5000   # user-service는 더 짧게 설정
        readTimeout: 10000
  circuitbreaker:
    enabled: true
  compression:
    request:
      enabled: true
    response:
      enabled: true

# S3 버킷 정보 & AWS 자격 증명
cloud:
  aws:
    s3:
      bucket: sang3jeomtest
    credentials:
      access-key: ${AWS_ACCESS_KEY}
      secret-key: ${AWS_SECRET_KEY}
    region:
      static: ap-northeast-2